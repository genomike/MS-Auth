<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js" exporterVersion="8.0.0">
  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_User" name="Usuario" processRef="Process_User" />
    <bpmn:participant id="Participant_Client" name="Aplicación Cliente" processRef="Process_Client" />
    <bpmn:participant id="Participant_AuthServer" name="Servidor de Autorización OAuth 2.0" processRef="Process_AuthServer" />
    <bpmn:participant id="Participant_ResourceServer" name="Servidor de Recursos" processRef="Process_ResourceServer" />
    <bpmn:messageFlow id="MessageFlow_1" sourceRef="Task_RedirectToAuth" targetRef="StartEvent_ReceiveAuthRequest" />
    <bpmn:messageFlow id="MessageFlow_2" sourceRef="Task_ShowLoginForm" targetRef="Task_ProvideCredentials" />
    <bpmn:messageFlow id="MessageFlow_3" sourceRef="Task_RedirectWithCode" targetRef="Task_ReceiveAuthCode" />
    <bpmn:messageFlow id="MessageFlow_4" sourceRef="Task_RequestToken" targetRef="Task_ProcessTokenRequest" />
    <bpmn:messageFlow id="MessageFlow_5" sourceRef="Task_ReturnAccessToken" targetRef="Task_ReceiveToken" />
    <bpmn:messageFlow id="MessageFlow_6" sourceRef="Task_AccessResource" targetRef="Task_ValidateToken" />
    <bpmn:messageFlow id="MessageFlow_7" sourceRef="Task_ReturnResource" targetRef="Task_ReceiveResource" />
  </bpmn:collaboration>
  <bpmn:process id="Process_User" isExecutable="false">
    <bpmn:startEvent id="StartEvent_UserInitiates" name="Usuario inicia sesión">
      <bpmn:outgoing>SequenceFlow_UserToCredentials</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Task_ProvideCredentials" name="Proporcionar credenciales">
      <bpmn:incoming>SequenceFlow_UserToCredentials</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_CredentialsProvided</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="EndEvent_UserLoggedIn" name="Usuario autenticado">
      <bpmn:incoming>SequenceFlow_CredentialsProvided</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_UserToCredentials" sourceRef="StartEvent_UserInitiates" targetRef="Task_ProvideCredentials" />
    <bpmn:sequenceFlow id="SequenceFlow_CredentialsProvided" sourceRef="Task_ProvideCredentials" targetRef="EndEvent_UserLoggedIn" />
  </bpmn:process>
  <bpmn:process id="Process_Client" isExecutable="true">
    <bpmn:startEvent id="StartEvent_ClientInitiates" name="Aplicación solicita autenticación">
      <bpmn:outgoing>SequenceFlow_ClientToRedirect</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_RedirectToAuth" name="Redirigir a servidor de autorización">
      <bpmn:incoming>SequenceFlow_ClientToRedirect</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_RedirectDone</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:receiveTask id="Task_ReceiveAuthCode" name="Recibir código de autorización">
      <bpmn:incoming>SequenceFlow_RedirectDone</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_CodeReceived</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_RequestToken" name="Solicitar token de acceso">
      <bpmn:incoming>SequenceFlow_CodeReceived</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenRequested</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:receiveTask id="Task_ReceiveToken" name="Recibir token de acceso">
      <bpmn:incoming>SequenceFlow_TokenRequested</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenReceived</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_AccessResource" name="Acceder a recursos protegidos">
      <bpmn:incoming>SequenceFlow_TokenReceived</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_ResourceRequested</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:receiveTask id="Task_ReceiveResource" name="Recibir recurso">
      <bpmn:incoming>SequenceFlow_ResourceRequested</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_ResourceReceived</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:endEvent id="EndEvent_ClientSuccess" name="Acceso exitoso">
      <bpmn:incoming>SequenceFlow_ResourceReceived</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_ClientToRedirect" sourceRef="StartEvent_ClientInitiates" targetRef="Task_RedirectToAuth" />
    <bpmn:sequenceFlow id="SequenceFlow_RedirectDone" sourceRef="Task_RedirectToAuth" targetRef="Task_ReceiveAuthCode" />
    <bpmn:sequenceFlow id="SequenceFlow_CodeReceived" sourceRef="Task_ReceiveAuthCode" targetRef="Task_RequestToken" />
    <bpmn:sequenceFlow id="SequenceFlow_TokenRequested" sourceRef="Task_RequestToken" targetRef="Task_ReceiveToken" />
    <bpmn:sequenceFlow id="SequenceFlow_TokenReceived" sourceRef="Task_ReceiveToken" targetRef="Task_AccessResource" />
    <bpmn:sequenceFlow id="SequenceFlow_ResourceRequested" sourceRef="Task_AccessResource" targetRef="Task_ReceiveResource" />
    <bpmn:sequenceFlow id="SequenceFlow_ResourceReceived" sourceRef="Task_ReceiveResource" targetRef="EndEvent_ClientSuccess" />
  </bpmn:process>
  <bpmn:process id="Process_AuthServer" isExecutable="true">
    <bpmn:sequenceFlow id="SequenceFlow_TokenReturned" sourceRef="Task_ReturnAccessToken" targetRef="EndEvent_AuthSuccess" />
    <bpmn:sequenceFlow id="SequenceFlow_AccessTokenGenerated" sourceRef="Task_GenerateAccessToken" targetRef="Task_ReturnAccessToken" />
    <bpmn:sequenceFlow id="SequenceFlow_AuthCodeValidNo" name="No" sourceRef="Gateway_AuthCodeValid" targetRef="EndEvent_AuthError">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${authCodeValid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_AuthCodeValidYes" name="Sí" sourceRef="Gateway_AuthCodeValid" targetRef="Task_GenerateAccessToken">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${authCodeValid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_AuthCodeValidated" sourceRef="Task_ValidateAuthCode" targetRef="Gateway_AuthCodeValid" />
    <bpmn:sequenceFlow id="SequenceFlow_TokenRequestProcessed" sourceRef="Task_ProcessTokenRequest" targetRef="Task_ValidateAuthCode" />
    <bpmn:sequenceFlow id="SequenceFlow_RedirectedWithCode" sourceRef="Task_RedirectWithCode" targetRef="Task_ProcessTokenRequest" />
    <bpmn:sequenceFlow id="SequenceFlow_AuthCodeGenerated" sourceRef="Task_GenerateAuthCode" targetRef="Task_RedirectWithCode" />
    <bpmn:sequenceFlow id="SequenceFlow_CredentialsValidNo" name="No" sourceRef="Gateway_CredentialsValid" targetRef="EndEvent_AuthError">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${credentialsValid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_CredentialsValidYes" name="Sí" sourceRef="Gateway_CredentialsValid" targetRef="Task_GenerateAuthCode">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${credentialsValid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_CredentialsValidated" sourceRef="Task_ValidateCredentials" targetRef="Gateway_CredentialsValid" />
    <bpmn:sequenceFlow id="SequenceFlow_LoginFormShown" sourceRef="Task_ShowLoginForm" targetRef="Task_ValidateCredentials" />
    <bpmn:sequenceFlow id="SequenceFlow_ClientValidNo" name="No" sourceRef="Gateway_ClientValid" targetRef="EndEvent_AuthError">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientValid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_ClientValidYes" name="Sí" sourceRef="Gateway_ClientValid" targetRef="Task_ShowLoginForm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientValid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_ClientValidated" sourceRef="Task_ValidateClient" targetRef="Gateway_ClientValid" />
    <bpmn:sequenceFlow id="SequenceFlow_AuthRequestReceived" sourceRef="StartEvent_ReceiveAuthRequest" targetRef="Task_ValidateClient" />
    <bpmn:endEvent id="EndEvent_AuthError" name="Error de autorización">
      <bpmn:incoming>SequenceFlow_ClientValidNo</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_CredentialsValidNo</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_AuthCodeValidNo</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="EndEvent_AuthSuccess" name="Autorización exitosa">
      <bpmn:incoming>SequenceFlow_TokenReturned</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_ReturnAccessToken" name="Retornar token de acceso">
      <bpmn:incoming>SequenceFlow_AccessTokenGenerated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenReturned</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_GenerateAccessToken" name="Generar token de acceso">
      <bpmn:incoming>SequenceFlow_AuthCodeValidYes</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_AccessTokenGenerated</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_AuthCodeValid" name="¿Código válido?">
      <bpmn:incoming>SequenceFlow_AuthCodeValidated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_AuthCodeValidYes</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_AuthCodeValidNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:businessRuleTask id="Task_ValidateAuthCode" name="Validar código de autorización">
      <bpmn:incoming>SequenceFlow_TokenRequestProcessed</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_AuthCodeValidated</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:receiveTask id="Task_ProcessTokenRequest" name="Procesar solicitud de token">
      <bpmn:incoming>SequenceFlow_RedirectedWithCode</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenRequestProcessed</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_RedirectWithCode" name="Redirigir con código">
      <bpmn:incoming>SequenceFlow_AuthCodeGenerated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_RedirectedWithCode</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_GenerateAuthCode" name="Generar código de autorización">
      <bpmn:incoming>SequenceFlow_CredentialsValidYes</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_AuthCodeGenerated</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_CredentialsValid" name="¿Credenciales válidas?">
      <bpmn:incoming>SequenceFlow_CredentialsValidated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_CredentialsValidYes</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_CredentialsValidNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_ValidateCredentials" name="Validar credenciales">
      <bpmn:incoming>SequenceFlow_LoginFormShown</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_CredentialsValidated</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Task_ShowLoginForm" name="Mostrar formulario de login">
      <bpmn:incoming>SequenceFlow_ClientValidYes</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_LoginFormShown</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_ClientValid" name="¿Cliente válido?">
      <bpmn:incoming>SequenceFlow_ClientValidated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_ClientValidYes</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_ClientValidNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:businessRuleTask id="Task_ValidateClient" name="Validar cliente">
      <bpmn:incoming>SequenceFlow_AuthRequestReceived</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_ClientValidated</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:startEvent id="StartEvent_ReceiveAuthRequest" name="Recibir solicitud de autorización">
      <bpmn:outgoing>SequenceFlow_AuthRequestReceived</bpmn:outgoing>
    </bpmn:startEvent>
  </bpmn:process>
  <bpmn:process id="Process_ResourceServer" isExecutable="true">
    <bpmn:startEvent id="StartEvent_ResourceRequest" name="Solicitud de recurso">
      <bpmn:outgoing>SequenceFlow_ResourceRequestReceived</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:receiveTask id="Task_ValidateToken" name="Validar token de acceso">
      <bpmn:incoming>SequenceFlow_ResourceRequestReceived</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenValidated</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:exclusiveGateway id="Gateway_TokenValid" name="¿Token válido?">
      <bpmn:incoming>SequenceFlow_TokenValidated</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_TokenValidYes</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_TokenValidNo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_ReturnResource" name="Retornar recurso protegido">
      <bpmn:incoming>SequenceFlow_TokenValidYes</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_ResourceReturned</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndEvent_ResourceSuccess" name="Recurso entregado">
      <bpmn:incoming>SequenceFlow_ResourceReturned</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="EndEvent_ResourceError" name="Acceso denegado">
      <bpmn:incoming>SequenceFlow_TokenValidNo</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_ResourceRequestReceived" sourceRef="StartEvent_ResourceRequest" targetRef="Task_ValidateToken" />
    <bpmn:sequenceFlow id="SequenceFlow_TokenValidated" sourceRef="Task_ValidateToken" targetRef="Gateway_TokenValid" />
    <bpmn:sequenceFlow id="SequenceFlow_TokenValidYes" name="Sí" sourceRef="Gateway_TokenValid" targetRef="Task_ReturnResource">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${tokenValid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_TokenValidNo" name="No" sourceRef="Gateway_TokenValid" targetRef="EndEvent_ResourceError">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${tokenValid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_ResourceReturned" sourceRef="Task_ReturnResource" targetRef="EndEvent_ResourceSuccess" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">
      <bpmndi:BPMNShape id="Participant_AuthServer_di" bpmnElement="Participant_AuthServer" isHorizontal="true">
        <dc:Bounds x="160" y="470" width="1200" height="400" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_ReceiveAuthRequest_di" bpmnElement="StartEvent_ReceiveAuthRequest">
        <dc:Bounds x="212" y="537" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="191" y="580" width="78" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValidateClient_di" bpmnElement="Task_ValidateClient">
        <dc:Bounds x="320" y="515" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_ClientValid_di" bpmnElement="Gateway_ClientValid" isMarkerVisible="true">
        <dc:Bounds x="465" y="530" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="451" y="587" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ShowLoginForm_di" bpmnElement="Task_ShowLoginForm">
        <dc:Bounds x="570" y="515" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValidateCredentials_di" bpmnElement="Task_ValidateCredentials">
        <dc:Bounds x="720" y="515" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_CredentialsValid_di" bpmnElement="Gateway_CredentialsValid" isMarkerVisible="true">
        <dc:Bounds x="865" y="530" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="854" y="587" width="72" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_GenerateAuthCode_di" bpmnElement="Task_GenerateAuthCode">
        <dc:Bounds x="970" y="515" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_RedirectWithCode_di" bpmnElement="Task_RedirectWithCode">
        <dc:Bounds x="1120" y="515" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ProcessTokenRequest_di" bpmnElement="Task_ProcessTokenRequest">
        <dc:Bounds x="320" y="650" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValidateAuthCode_di" bpmnElement="Task_ValidateAuthCode">
        <dc:Bounds x="470" y="650" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_AuthCodeValid_di" bpmnElement="Gateway_AuthCodeValid" isMarkerVisible="true">
        <dc:Bounds x="615" y="665" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="600" y="722" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_GenerateAccessToken_di" bpmnElement="Task_GenerateAccessToken">
        <dc:Bounds x="720" y="650" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReturnAccessToken_di" bpmnElement="Task_ReturnAccessToken">
        <dc:Bounds x="870" y="650" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_AuthSuccess_di" bpmnElement="EndEvent_AuthSuccess">
        <dc:Bounds x="1022" y="672" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1010" y="715" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_AuthError_di" bpmnElement="EndEvent_AuthError">
        <dc:Bounds x="1222" y="782" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1210" y="825" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_AuthRequestReceived_di" bpmnElement="SequenceFlow_AuthRequestReceived">
        <di:waypoint x="248" y="555" />
        <di:waypoint x="320" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ClientValidated_di" bpmnElement="SequenceFlow_ClientValidated">
        <di:waypoint x="420" y="555" />
        <di:waypoint x="465" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ClientValidYes_di" bpmnElement="SequenceFlow_ClientValidYes">
        <di:waypoint x="515" y="555" />
        <di:waypoint x="570" y="555" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="537" y="537" width="12" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ClientValidNo_di" bpmnElement="SequenceFlow_ClientValidNo">
        <di:waypoint x="490" y="580" />
        <di:waypoint x="490" y="800" />
        <di:waypoint x="1222" y="800" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="498" y="687" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_LoginFormShown_di" bpmnElement="SequenceFlow_LoginFormShown">
        <di:waypoint x="670" y="555" />
        <di:waypoint x="720" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_CredentialsValidated_di" bpmnElement="SequenceFlow_CredentialsValidated">
        <di:waypoint x="820" y="555" />
        <di:waypoint x="865" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_CredentialsValidYes_di" bpmnElement="SequenceFlow_CredentialsValidYes">
        <di:waypoint x="915" y="555" />
        <di:waypoint x="970" y="555" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="937" y="537" width="12" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_CredentialsValidNo_di" bpmnElement="SequenceFlow_CredentialsValidNo">
        <di:waypoint x="890" y="580" />
        <di:waypoint x="890" y="800" />
        <di:waypoint x="1222" y="800" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="898" y="687" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_AuthCodeGenerated_di" bpmnElement="SequenceFlow_AuthCodeGenerated">
        <di:waypoint x="1070" y="555" />
        <di:waypoint x="1120" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_RedirectedWithCode_di" bpmnElement="SequenceFlow_RedirectedWithCode">
        <di:waypoint x="1170" y="595" />
        <di:waypoint x="1170" y="620" />
        <di:waypoint x="370" y="620" />
        <di:waypoint x="370" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenRequestProcessed_di" bpmnElement="SequenceFlow_TokenRequestProcessed">
        <di:waypoint x="420" y="690" />
        <di:waypoint x="470" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_AuthCodeValidated_di" bpmnElement="SequenceFlow_AuthCodeValidated">
        <di:waypoint x="570" y="690" />
        <di:waypoint x="615" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_AuthCodeValidYes_di" bpmnElement="SequenceFlow_AuthCodeValidYes">
        <di:waypoint x="665" y="690" />
        <di:waypoint x="720" y="690" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="687" y="672" width="12" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_AuthCodeValidNo_di" bpmnElement="SequenceFlow_AuthCodeValidNo">
        <di:waypoint x="640" y="715" />
        <di:waypoint x="640" y="800" />
        <di:waypoint x="1222" y="800" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="648" y="755" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_AccessTokenGenerated_di" bpmnElement="SequenceFlow_AccessTokenGenerated">
        <di:waypoint x="820" y="690" />
        <di:waypoint x="870" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenReturned_di" bpmnElement="SequenceFlow_TokenReturned">
        <di:waypoint x="970" y="690" />
        <di:waypoint x="1022" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_ResourceServer_di" bpmnElement="Participant_ResourceServer" isHorizontal="true">
        <dc:Bounds x="160" y="890" width="1200" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_ResourceRequest_di" bpmnElement="StartEvent_ResourceRequest">
        <dc:Bounds x="212" y="957" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="188" y="1000" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValidateToken_di" bpmnElement="Task_ValidateToken">
        <dc:Bounds x="320" y="935" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_TokenValid_di" bpmnElement="Gateway_TokenValid" isMarkerVisible="true">
        <dc:Bounds x="465" y="950" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="452" y="1007" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReturnResource_di" bpmnElement="Task_ReturnResource">
        <dc:Bounds x="570" y="935" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_ResourceSuccess_di" bpmnElement="EndEvent_ResourceSuccess">
        <dc:Bounds x="722" y="957" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="700" y="1000" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_ResourceError_di" bpmnElement="EndEvent_ResourceError">
        <dc:Bounds x="472" y="1037" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="451" y="1080" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_ResourceRequestReceived_di" bpmnElement="SequenceFlow_ResourceRequestReceived">
        <di:waypoint x="248" y="975" />
        <di:waypoint x="320" y="975" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenValidated_di" bpmnElement="SequenceFlow_TokenValidated">
        <di:waypoint x="420" y="975" />
        <di:waypoint x="465" y="975" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenValidYes_di" bpmnElement="SequenceFlow_TokenValidYes">
        <di:waypoint x="515" y="975" />
        <di:waypoint x="570" y="975" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="537" y="957" width="11" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenValidNo_di" bpmnElement="SequenceFlow_TokenValidNo">
        <di:waypoint x="490" y="1000" />
        <di:waypoint x="490" y="1037" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="498" y="1016" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ResourceReturned_di" bpmnElement="SequenceFlow_ResourceReturned">
        <di:waypoint x="670" y="975" />
        <di:waypoint x="722" y="975" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_User_di" bpmnElement="Participant_User" isHorizontal="true">
        <dc:Bounds x="160" y="30" width="1200" height="150" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_UserInitiates_di" bpmnElement="StartEvent_UserInitiates">
        <dc:Bounds x="212" y="87" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="197" y="130" width="67" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ProvideCredentials_di" bpmnElement="Task_ProvideCredentials">
        <dc:Bounds x="320" y="65" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_UserLoggedIn_di" bpmnElement="EndEvent_UserLoggedIn">
        <dc:Bounds x="482" y="87" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="472" y="130" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_UserToCredentials_di" bpmnElement="SequenceFlow_UserToCredentials">
        <di:waypoint x="248" y="105" />
        <di:waypoint x="320" y="105" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_CredentialsProvided_di" bpmnElement="SequenceFlow_CredentialsProvided">
        <di:waypoint x="420" y="105" />
        <di:waypoint x="482" y="105" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_Client_di" bpmnElement="Participant_Client" isHorizontal="true">
        <dc:Bounds x="160" y="200" width="1200" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_ClientInitiates_di" bpmnElement="StartEvent_ClientInitiates">
        <dc:Bounds x="212" y="267" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="187" y="310" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_RedirectToAuth_di" bpmnElement="Task_RedirectToAuth">
        <dc:Bounds x="320" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReceiveAuthCode_di" bpmnElement="Task_ReceiveAuthCode">
        <dc:Bounds x="470" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_RequestToken_di" bpmnElement="Task_RequestToken">
        <dc:Bounds x="620" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReceiveToken_di" bpmnElement="Task_ReceiveToken">
        <dc:Bounds x="770" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_AccessResource_di" bpmnElement="Task_AccessResource">
        <dc:Bounds x="920" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReceiveResource_di" bpmnElement="Task_ReceiveResource">
        <dc:Bounds x="1070" y="245" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_ClientSuccess_di" bpmnElement="EndEvent_ClientSuccess">
        <dc:Bounds x="1222" y="267" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1204" y="310" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_ClientToRedirect_di" bpmnElement="SequenceFlow_ClientToRedirect">
        <di:waypoint x="248" y="285" />
        <di:waypoint x="320" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_RedirectDone_di" bpmnElement="SequenceFlow_RedirectDone">
        <di:waypoint x="420" y="285" />
        <di:waypoint x="470" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_CodeReceived_di" bpmnElement="SequenceFlow_CodeReceived">
        <di:waypoint x="570" y="285" />
        <di:waypoint x="620" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenRequested_di" bpmnElement="SequenceFlow_TokenRequested">
        <di:waypoint x="720" y="285" />
        <di:waypoint x="770" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_TokenReceived_di" bpmnElement="SequenceFlow_TokenReceived">
        <di:waypoint x="870" y="285" />
        <di:waypoint x="920" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ResourceRequested_di" bpmnElement="SequenceFlow_ResourceRequested">
        <di:waypoint x="1020" y="285" />
        <di:waypoint x="1070" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_ResourceReceived_di" bpmnElement="SequenceFlow_ResourceReceived">
        <di:waypoint x="1170" y="285" />
        <di:waypoint x="1222" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_1_di" bpmnElement="MessageFlow_1">
        <di:waypoint x="340" y="325" />
        <di:waypoint x="340" y="450" />
        <di:waypoint x="230" y="450" />
        <di:waypoint x="230" y="537" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_2_di" bpmnElement="MessageFlow_2">
        <di:waypoint x="600" y="515" />
        <di:waypoint x="600" y="230" />
        <di:waypoint x="370" y="230" />
        <di:waypoint x="370" y="145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_3_di" bpmnElement="MessageFlow_3">
        <di:waypoint x="1170" y="515" />
        <di:waypoint x="1170" y="430" />
        <di:waypoint x="520" y="430" />
        <di:waypoint x="520" y="325" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_4_di" bpmnElement="MessageFlow_4">
        <di:waypoint x="670" y="325" />
        <di:waypoint x="670" y="440" />
        <di:waypoint x="360" y="440" />
        <di:waypoint x="360" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_5_di" bpmnElement="MessageFlow_5">
        <di:waypoint x="920" y="650" />
        <di:waypoint x="920" y="460" />
        <di:waypoint x="820" y="460" />
        <di:waypoint x="820" y="325" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_6_di" bpmnElement="MessageFlow_6">
        <di:waypoint x="970" y="325" />
        <di:waypoint x="970" y="450" />
        <di:waypoint x="390" y="450" />
        <di:waypoint x="390" y="935" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_7_di" bpmnElement="MessageFlow_7">
        <di:waypoint x="620" y="935" />
        <di:waypoint x="620" y="410" />
        <di:waypoint x="1120" y="410" />
        <di:waypoint x="1120" y="325" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
